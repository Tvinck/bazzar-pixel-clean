# –û—Ç—á–µ—Ç –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ PIXEL AI

## 1. –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (Current Status)
–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

*   **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —à–∞–±–ª–æ–Ω–∞–º**: 
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ -> –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ -> –û–ø–ª–∞—Ç–∞ -> –ì–µ–Ω–µ—Ä–∞—Ü–∏—è -> –†–µ–∑—É–ª—å—Ç–∞—Ç.
    *   **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –û—à–∏–±–∫–∏ –æ–ø–ª–∞—Ç—ã ("Insufficient Funds") —Ä–µ—à–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–µ–π –±–∞–ª–∞–Ω—Å–∞.
    *   **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –û—à–∏–±–∫–∏ "Undefined model" —Ä–µ—à–µ–Ω—ã –∫–∞—Ä—Ç–æ–π –º–æ–¥–µ–ª–µ–π.
    *   **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**: –ó–∞–≤–∏—Å–∞–Ω–∏—è (ETIMEDOUT) —Ä–µ—à–µ–Ω—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º Retry-–ª–æ–≥–∏–∫–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞ –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ –º–æ–¥–µ–ª–∏ (`nano_banana`).
    *   **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–Ω–µ–¥—Ä–µ–Ω `MOCK_AI` —Ä–µ–∂–∏–º –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ UI-—Ñ–ª–æ—É –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏.
*   **–¢–µ–ª–µ–≥—Ä–∞–º –ë–æ—Ç**:
    *   –ö–Ω–æ–ø–∫–∞ "üìÇ –®–∞–±–ª–æ–Ω—ã" —Ä–∞–±–æ—Ç–∞–µ—Ç.
    *   –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ –∏ –∑–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã.
*   **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:
    *   –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ (–ê–≤—Ç–æ, –†–æ–∂–¥–µ—Å—Ç–≤–æ –∏ —Ç.–¥.) –≥–æ—Ç–æ–≤—ã.
    *   –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (RLS) –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∏ –≥–æ—Ç–æ–≤—ã.

## 2. –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ–¥–µ–ª–∞—Ç—å (Critical Tasks)

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–ë–ª–æ–∫–∏—Ä—É—é—Ç —Ä–µ–ª–∏–∑)
1.  **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Training (–û–±—É—á–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–≤)**:
    *   –§—É–Ω–∫—Ü–∏—è `trainModel` –≤ `ai-service.js` —Å–µ–π—á–∞—Å —è–≤–ª—è–µ—Ç—Å—è "–∑–∞–≥–ª—É—à–∫–æ–π" (Stub). –û–Ω–∞ –∏–º–∏—Ç–∏—Ä—É–µ—Ç —É—Å–ø–µ—Ö, –Ω–æ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ LoRA. 
    *   **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ**: –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API (–Ω–∞–ø—Ä–∏–º–µ—Ä, Fal.ai –∏–ª–∏ Replicate) –¥–ª—è —Ñ–∞–π–Ω-—Ç—é–Ω–∏–Ω–≥–∞ –º–æ–¥–µ–ª–µ–π.

### ‚úÖ –†–µ—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
2.  **~~–û–±—Ä–∞–±–æ—Ç–∫–∞ "–¢—è–∂–µ–ª—ã—Ö" –≥–µ–Ω–µ—Ä–∞—Ü–∏–π~~** ‚úÖ **–ì–û–¢–û–í–û**:
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–µ–π (Job Queue).
    *   –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –∏ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã.
    *   –ë—ç–∫–µ–Ω–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ HTTP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
    *   **–ú–∏–≥—Ä–∞—Ü–∏—è**: `21_create_generation_jobs.sql`
    *   **API**: `/api/jobs/create`, `/api/jobs/:jobId`
3.  **~~–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Toasts)~~** ‚úÖ **–ì–û–¢–û–í–û**:
    *   –ò—Å–ø—Ä–∞–≤–ª–µ–Ω Z-Index (9999) –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.
4.  **~~–¢–µ–ª–µ–≥—Ä–∞–º-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è~~** ‚úÖ **–ì–û–¢–û–í–û**:
    *   –ë—ç–∫–µ–Ω–¥ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –º–∞–ø–ø–∏—Ç UUID ‚Üí Telegram ID –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–£–ª—É—á—à–µ–Ω–∏—è)

## 3. –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (Stability Check)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| **Frontend UI** | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ | –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–ª–∞–≤–Ω—ã–µ, –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è (Alert/Toast). |
| **Backend API** | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ | Job Queue —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ç–∞–π–º–∞—É—Ç—ã. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞. |
| **Database** | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ | –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞. |
| **AI Integration** | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ | DefAPI —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ. Job Queue —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Ç–∞–π–º–∞—É—Ç–æ–≤, –Ω–æ —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. |

## 4. –ü–ª–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (Action Plan)

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ Production:
1.  **‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é Job Queue**: –ó–∞–ø—É—Å—Ç–∏—Ç—å `migrations/21_create_generation_jobs.sql` –≤ Supabase Production.
2.  **‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏**: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–∞–π–ª—ã `migrations/17_...` –¥–æ `20_...` –≤ Supabase Production.
3.  **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º DefAPI**: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 30-60 —Å–µ–∫—É–Ω–¥, –Ω–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–∞–π–º–∞—É—Ç–æ–≤).
4.  **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –û–±—É—á–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**: –ó–∞–º–µ–Ω–∏—Ç—å –∫–æ–¥ –≤ `trainModel` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤, –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω—É–∂–Ω–∞ –¥–ª—è —Ä–µ–ª–∏–∑–∞.

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π:
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–≤ –ø–æ—Ä—è–¥–∫–µ):
migrations/17_add_car_templates.sql        # –ù–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã
migrations/18_fix_templates_permissions.sql # RLS –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
migrations/19_increase_default_balance.sql  # –ë–∞–ª–∞–Ω—Å –¥–ª—è —Ç–µ—Å—Ç–æ–≤
migrations/20_fix_template_models.sql       # –ú–æ–¥–µ–ª–∏ –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
migrations/21_create_generation_jobs.sql    # ‚ú® Job Queue —Å–∏—Å—Ç–µ–º–∞
```

---
**–ò—Ç–æ–≥**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ. Job Queue —Å–∏—Å—Ç–µ–º–∞ —Ä–µ—à–∏–ª–∞ –ø—Ä–æ–±–ª–µ–º—É —Ç–∞–π–º–∞—É—Ç–æ–≤. –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞.
